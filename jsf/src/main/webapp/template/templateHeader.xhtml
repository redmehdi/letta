<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:h="http://xmlns.jcp.org/jsf/html">
    <body>
	    <ui:composition>
	      <div class="container">
	        <div class="navbar-header">
	          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-ex-collapse">
	            <span class="sr-only">Toggle navigation</span>
	            <span class="icon-bar"></span>
	            <span class="icon-bar"></span>
	            <span class="icon-bar"></span>
	          </button>
              <a href="#{request.contextPath}/" class="navbar-brand"><img height="20" alt="Brand" src="img/logo.png"/></a>
	        </div>
	        <div class="collapse navbar-collapse" id="navbar-ex-collapse">
	          <ul class="nav navbar-nav navbar-right">
					<li>
	            	<h:form id="searchForm" class="navbar-form">
	                <div class="input-group">
	                  <div class="input-group-btn">
									<h:commandButton id="searchButton" class="btn btn-default"
										value="Search"
										onclick="
		var a=document.getElementById('searchForm:srch-term').value;
		var current_location= window.location.pathname;
		if(current_location=='/letta/jsf/'){		
		window.location='faces/searchResults.xhtml?term='+a+'&amp;page=0'+'&amp;count=4';
		}else{
		window.location='searchResults.xhtml?term='+a+'&amp;page=0'+'&amp;count=4';
		}
		return false;
									">
									</h:commandButton>
	                  </div>
	                  <h:inputText  class="form-control" id="srch-term" value="#{searchController.terms}" />
	                </div>

	              </h:form>
	            </li>
	            <li>
	            	<h:link value="Login" rendered="#{loginController.anonymous}" outcome="faces/login.xhtml" />
		        </li>
		        <li>
		            <h:link value="Sign up" rendered="#{loginController.anonymous}" outcome="faces/register.xhtml" />
		        </li>
		        <h:panelGroup rendered="#{loginController.admin}">
			        <li class="dropdown">
			        	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
					        Administration&nbsp;&nbsp;<i class="fa fa-caret-down"></i>
					    </a>
					    <ul class="dropdown-menu" role="menu">
			            	<li><h:link value="Users"  outcome="faces/adminPrivate.xhtml" /></li>
	 		            	<li><h:link value="Events" outcome="faces/adminEventsPrivate.xhtml"/> </li>
			            </ul>
			        </li>
		        </h:panelGroup>
                <h:panelGroup rendered="#{!loginController.anonymous}">
				<li class="dropdown">
				    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
				        #{loginController.currentUser.name}&nbsp;&nbsp;<i class="fa fa-caret-down"></i>
				     </a>
					<ul class="dropdown-menu" role="menu">
						<li><h:link value="Create Event" outcome="faces/createEvent.xhtml" /></li>
						<li class="divider"></li>
						<li><h:link value="My joined Events" outcome="faces/listJoinedEvents.xhtml" /></li>
						<li><h:link value="My created Events" outcome="faces/userPrivate.xhtml" /></li>
						<li class="divider"></li>
						<li><h:link value="Modify profile" outcome="faces/modifyProfile.xhtml" /></li>
						<li class="divider"></li>
						<li><h:link value="Messages" outcome="faces/messages.xhtml" rendered="#{userNotifications.countUnreadNotifications() == 0}" /></li>
						<li><h:link value="Messages (#{userNotifications.countUnreadNotifications()})" outcome="faces/messages.xhtml" rendered="#{userNotifications.countUnreadNotifications() != 0}" /></li>
						<li class="divider"></li>
						<li><h:link value="Logout" outcome="faces/logout.xhtml" /></li>
					</ul>
				</li>
				</h:panelGroup>
	          </ul>
	        </div>
	      </div>
	    </ui:composition>
    </body>
</html>
