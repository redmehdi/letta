<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
<h:head>
	<title>Search results</title>
	<style>
.ui-datagrid-content {
	border: none;
}

.searchButton {
	float: right;
}
</style>
</h:head>
<h:body>

	<ui:composition template="/template/templateLayout.xhtml">

		<ui:define name="header">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle">
						<span class="sr-only">Toggle navigation</span> <span
							class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
					<a class="navbar-brand"><img height="20" alt="Brand"
						src="img/logo.png" /></a>
				</div>
			</div>
		</ui:define>

		<ui:define name="content">
			<div class="container ">
				<div class="row ">
					<div class="col-md-3 "></div>

					<div class="col-md-6">

						<h:form>
							<div style="overflow: hidden; padding-right: .5em;"
								class="col-md-10">
								<h:inputText id="search" required="false" maxlength="50"
									class="form-control" value="#{searchController.terms}" />
							</div>
							<div class="col-md-2">
								<h:commandButton class="btn btn-default searchButton"
									value="Search" action="#{searchController.doSearch()}">
								</h:commandButton>
							</div>
							<br />
							<br />
							<br />
							<br />
							<br />

							<p:panel id="toUpdate"
								rendered="#{searchController.searchResults2 ne null}">


								<f:facet name="header">
            Search results
        </f:facet>

									<p:dataTable var="event"
									value="#{searchController.searchResults2}" paginator="true"  rows="10"
									paginatorposition="bottom" 
									paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
									id="eventTable" lazy="true" >
									<p:column headerText="Title" sortBy="#{event.title}">
										<h:outputText value="#{event.title}" />
									</p:column>
									<p:column headerText="Date" sortBy="#{event.date}">
										<h:outputText value="#{event.date}" />
									</p:column>
									<p:column headerText="Description"
										sortBy="#{event.shortDescription}">
										<h:outputText value="#{event.shortDescription}" />
									</p:column>
									<p:column headerText="Join!">
										<h:commandLink class="info"
											action="#{joinController.doJoin(event)}" value="Join" />
									</p:column>
								</p:dataTable>
							</p:panel>
						</h:form>

						<br /> <br />
					</div>
					<div class="col-md-3 "></div>
				</div>
			</div>
		</ui:define>

	</ui:composition>

</h:body>

</html>